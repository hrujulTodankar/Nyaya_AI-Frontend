# Nyaya AI Architecture Diagram

## System Overview

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              Nyaya AI Backend System                          │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────┐    ┌──────────────────────┐    ┌──────────────────────┐   │
│  │   Frontend      │───▶│   API Gateway        │───▶│   Sovereign Agents   │   │
│  │   (Hrujul UI)   │    │   (FastAPI)          │    │                      │   │
│  └─────────────────┘    └──────────────────────┘    │  ┌─────────────────┐ │   │
│                                                    │  │   BaseAgent     │ │   │
│                                                    │  └─────────────────┘ │   │
│                                                    │         │              │   │
│                                                    │         ▼              │   │
│                                                    │  ┌─────────────────┐   │   │
│                                                    │  │ Jurisdiction    │   │   │
│                                                    │  │ Router Agent    │   │   │
│                                                    │  └─────────────────┘   │   │
│                                                    │         │              │   │
│                                                    │         ▼              │   │
│                                                    │  ┌─────────────────┐   │   │
│                                                    │  │ Legal Agents    │   │   │
│                                                    │  │ (IN, UK, UAE)   │   │   │
│                                                    │  └─────────────────┘   │   │
│                                                    │         │              │   │
│                                                    │         ▼              │   │
│                                                    │  ┌─────────────────┐   │   │
│                                                    │  │ Constitutional  │   │   │
│                                                    │  │ Agent (IN only) │   │   │
│                                                    │  └─────────────────┘   │   │
│                                                    └───────────────────────────┘
│                                                                                 │
│  ┌─────────────────┐    ┌──────────────────────┐    ┌──────────────────────┐   │
│  │   Aditya's      │───▶│   Data Bridge        │───▶│   Jurisdiction       │   │
│  │   Legal Data    │    │                      │    │   Router             │   │
│  │   (JSON)        │    │  ┌─────────────────┐ │    │                      │   │
│  └─────────────────┘    │  │   Loader        │ │    │  ┌─────────────────┐ │   │
│                         │  └─────────────────┘ │    │  │   Resolver      │ │   │
│                         │         │            │    │  │   Pipeline      │ │   │
│                         │         ▼            │    │  └─────────────────┘ │   │
│                         │  ┌─────────────────┐ │    │         │            │   │
│                         │  │   Validator     │ │    │         ▼            │   │
│                         │  └─────────────────┘ │    │  ┌─────────────────┐ │   │
│                         │         │            │    │  │ Confidence      │ │   │
│                         │         ▼            │    │  │ Aggregator      │ │   │
│                         │  ┌─────────────────┐ │    │  └─────────────────┘ │   │
│                         │  │ Standard        │ │    │         │            │   │
│                         │  │ Schemas       │ │    │         ▼            │   │
│                         │  │ (Section, Act, │ │    │  ┌─────────────────┐ │   │
│                         │  │ Case)         │ │    │  │ Fallback        │ │   │
│                         │  └─────────────────┘ │    │  │ Manager         │ │   │
│                         └──────────────────────┘    └──────────────────────┘   │
│                                                                                 │
│  ┌─────────────────┐    ┌──────────────────────┐    ┌──────────────────────┐   │
│  │   Raj's RL      │───▶│   RL Engine          │───▶│   Provenance Chain   │   │
│  │   Feedback      │    │                      │    │                      │   │
│  │                 │    │  ┌─────────────────┐ │    │  ┌─────────────────┐ │   │
│  └─────────────────┘    │  │ Feedback API    │ │    │  │ Event Signer    │ │   │
│                         │  └─────────────────┘ │    │  │ (HMAC-SHA256)   │ │   │
│                         │         │            │    │  └─────────────────┘ │   │
│                         │         ▼            │    │         │            │   │
│                         │  ┌─────────────────┐ │    │         ▼            │   │
│                         │  │ Performance     │ │    │  ┌─────────────────┐ │   │
│                         │  │ Memory          │ │    │  │ Hash Chain      │ │   │
│                         │  └─────────────────┘ │    │  │ Ledger          │ │   │
│                         │         │            │    │  └─────────────────┘ │   │
│                         │         ▼            │    │         │            │   │
│                         │  ┌─────────────────┐ │    │         ▼            │   │
│                         │  │ Reward Engine   │ │    │  ┌─────────────────┐ │   │
│                         │  └─────────────────┘ │    │  │ Lineage Tracer  │ │   │
│                         └──────────────────────┘    │  └─────────────────┘ │   │
│                                                    └───────────────────────────┘
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Event Flow Diagram

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Query         │───▶│   Event         │───▶│   Event         │───▶│   Hash Chain    │
│   Received      │    │   Signed        │    │   Emitted       │    │   Ledger        │
│                 │    │   (HMAC)        │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │                       │
         ▼                       ▼                       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Jurisdiction  │───▶│   Decision      │───▶│   Event         │───▶│   Immutable     │
│   Resolved      │    │   Explained     │    │   Emitted       │    │   Chain         │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │                       │
         ▼                       ▼                       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Agent         │───▶│   Reasoning     │───▶│   Event         │───▶│   Provenance    │
│   Processed     │    │   Explained     │    │   Emitted       │    │   Verified      │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │                       │
         ▼                       ▼                       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Feedback      │───▶│   RL Reward/    │───▶│   Event         │───▶│   Audit Trail   │
│   Received      │    │   Penalty       │    │   Emitted       │    │   Available     │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
```

## Component Interaction Flow

```
User Query
    │
    ▼
API Gateway (FastAPI)
    │
    ▼
Jurisdiction Router Agent
    │
    ▼
├─→ Jurisdiction Determined ──→ Legal Agent (IN/UK/UAE)
│         │                              │
│         ▼                              ▼
│   Data Bridge ────────────────→ Legal Analysis
│         │                              │
│         ▼                              ▼
│   Load Legal Data              Constitutional Agent (if IN)
│                                      │
│                                      ▼
│                                RL Feedback Loop
└───────────────────────────────────────│
                                       ▼
                              Provenance Chain (Signed Events)
                                       │
                                       ▼
                              Hash Chain Verification
                                       │
                                       ▼
                              Complete Audit Trail
```

## Data Flow Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              Data Flow Architecture                             │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  JSON Legal Datasets ────────────────────────────────────────────────────────┐  │
│         │                                                                      │  │
│         ▼                                                                      │  │
│  ┌─────────────────┐    ┌─────────────────┐    ┌──────────────────────────┐   │  │
│  │   Data Bridge   │───▶│   Standard      │───▶│   Sovereign Agents       │   │  │
│  │   (Loader)      │    │   Schemas       │    │   (Legal Analysis)       │   │  │
│  └─────────────────┘    └─────────────────┘    └──────────────────────────┘   │  │
│         │                       │                       │                      │  │
│         ▼                       ▼                       ▼                      │  │
│  ┌─────────────────┐    ┌─────────────────┐    ┌──────────────────────────┐   │  │
│  │   Validator     │───▶│   Normalized    │───▶│   Jurisdiction Routing   │   │  │
│  │                 │    │   Objects       │    │   & Processing           │   │  │
│  └─────────────────┘    └─────────────────┘    └──────────────────────────┘   │  │
│         │                       │                       │                      │  │
│         ▼                       ▼                       ▼                      │  │
│  ┌─────────────────┐    ┌─────────────────┐    ┌──────────────────────────┐   │  │
│  │   Integrity     │───▶│   Metadata      │───▶│   RL Engine &            │   │  │
│  │   Check         │    │   Preserved     │    │   Provenance Chain       │   │  │
│  └─────────────────┘    └─────────────────┘    └──────────────────────────┘   │  │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```